@Entry
@Component
struct TestTextPage {
  @State text: string = "人民领袖｜绿水青山间的“国之大者”\n" +
    "                                                                                               央视网\n" +
    "                                                                                               央视网官方账号\n" +
    "                                                                                               2025-6-509:37北京\n" +
    "                                                                                               年初，一张与秦岭有关的白纸黑字红戳“禁止令”获无数网友点赞，“在裁定生效之日起立即停止组织人员进入秦岭核心保护区开展穿越、登山活动”。\n" +
    "                                                                                               如今，守护秦岭的人越来越多。\n" +
    "                                                                                               五年前，习近平总书记赴陕西考察，第一站就是秦岭。\n" +
    "                                                                                               那是2020年4月20日，在秦岭牛背梁国家级自然保护区，总书记迎着清冽的山风举目远眺，语重心长地指出：“生态文明建设并不是说把多少真金白银捧在手里，而是为历史、为子孙后代去做。”\n" +
    "                                                                                               2020年4月20日，习近平总书记在位于陕西柞水的秦岭牛背梁国家级自然保护区考察秦岭生态保护情况。\n" +
    "                                                                                               曾几何时，秦岭“病”了。\n" +
    "                                                                                               秦岭北麓西安境内，一栋栋违建别墅蚕食着山脚的绿色。从2014年5月到2018年7月，总书记先后六次作出批示指示，推动问题整改解决。\n" +
    "                                                                                               “秦岭违建是一个大教训。”那一次深入秦岭，总书记提醒大家对“国之大者”要心中有数：从今往后，在陕西为官，首先要了解这段历史、这个教训，警钟长鸣，明白自己的职责，履行好自己的职责，当好秦岭生态的卫士，切勿重蹈覆辙。\n" +
    "                                                                                               对生态环境遭受破坏问题，习近平总书记一向痛心疾首。\n" +
    "                                                                                               浙江杭州千岛湖临湖地带违规搞建设、新疆卡山自然保护区违规“瘦身”、腾格里沙漠污染、青海祁连山自然保护区和木里矿区破坏性开采……这些年，总书记多次对一些地方破坏生态事件作出重要批示，要求“不彻底解决绝不松手”。\n" +
    "                                                                                               在总书记看来，抓这些事，都是着眼于确保中华民族长远发展、确保实现“两个一百年”奋斗目标，都是全局之计、长远之计，都是国之大者。\n" +
    "                                                                                               党的十八大以来，生态保护工作成为“国之大者”。\n" +
    "                                                                                               在“五位一体”总体布局中，生态文明建设是其中一位；在新时代坚持和发展中国特色社会主义的基本方略中，坚持人与自然和谐共生是其中一条；在新发展理念中，绿色是其中一项；在三大攻坚战中，污染防治是其中一战……可以说，“国之大者”蕴于绿水青山间。\n" +
    "                                                                                               2023年8月11日，游客在浙江安吉余村参观。\n" +
    "                                                                                               海南热带雨林国家公园树木繁茂、郁郁葱葱。\n" +
    "                                                                                               2022年4月11日，习近平总书记来到这里考察。当时公园负责介绍的讲解员回忆说，同行一公里，总书记的脚步放得很慢，不时驻足观察周边的树木。\n" +
    "                                                                                               “当年大炼钢铁，把树砍光了。之后为了经济增长，一些地方又不惜代价。自然界的命运和人类息息相关。我们是在为历史、为民族做这件事。”\n" +
    "                                                                                               绿色发展，从曾经的选择题变成今天的必答题。抚今追昔，总书记叮嘱当地党政负责同志，海南以生态立省，海南热带雨林国家公园建设是重中之重。要跳出海南看这项工作，视之为“国之大者”。\n" +
    "                                                                                               高原之上，中国最大的内陆咸水湖——青海湖波光粼粼，一望无际。\n" +
    "                                                                                               “现在水有多深？”“这里水质怎么样？”“鸟类有多少种？”“禁渔是怎么搞的？”2021年夏天，总书记站在青海湖仙女湾畔，围绕青海湖生态环境现状和保护工作，一个问题接着一个问题，问得很细。\n" +
    "                                                                                               之前，总书记到地方调研已看过三江源、祁连山，“这一次专门";
  @State lines: Array<string> = [];
  controller: TextController = new TextController();

  build() {
    Column() {
      Text(this.text, { controller: this.controller })
        .fontSize(20)
        .lineHeight(22)
        .width('90%')
        .onAreaChange(() => {
          let layoutManager: LayoutManager = this.controller.getLayoutManager();
          let lineCount =  layoutManager.getLineCount();
          console.log('[JVC]', 'lineCount: '+lineCount);
          for (let index = 0; index < lineCount; index++) {
            let metrics = layoutManager.getLineMetrics(index)
            console.log('[JVC]', 'line: '+index+", range:"+metrics.startIndex+"-"+metrics.endIndex+"  "+
            this.text.substring(metrics.startIndex, metrics.endIndex));
          }
        })
    }
    .width('100%').margin({top : 50})
  }
}